<!DOCTYPE html>
<html>

<head>
  <%- include title %>
</head>

<body>
  <%- include layout %>
  <div class="container-fluid">
    <div class="row">
      <%- include sidebar %>
      <!-- /.col-lg-3 -->
      <div class="col-lg-9">
        <div class="carousel slide my-4" data-ride="carousel">
          <!-- page -->
          <nav aria-label="Page navigation example">
            <% if (pages > 0) { %>

            <ul class="pagination">
              <ul class="pagination text-center">
                <% if (current == 1) { %>

                <a class="disabled page-link" href="/shop?page=1" aria-label="Previous">
                  <span aria-hidden="true">«</span>
                  <span class="sr-only">First</span>
                </a>
                <% } else { %>
                <a class="page-link" href="/shop?page=1" aria-label="Previous">
                  <span aria-hidden="true">«</span>
                  <span class="sr-only">First</span>
                </a>

                <% } %>
                <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
                <% if (i !== 1) { %>
                <li class="disabled"><a class="page-link">...</a></li>
                <% } %>
                <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
                <% if (i == current) { %>
                <li class="active"><a class="page-link"><%= i %></a></li>
                <% } else { %>
                <li class="page-item"><a class="page-link"  href="/shop?page=<%= i %>"><%= i %></a></li>
                <% } %>
                <% if (i == Number(current) + 4 && i < pages) { %>
                <li class="disabled page-item"><a class="page-link">...</a></li>
                <% } %>
                <% } %>
                <% if (current == pages) { %>
               
                <% } else { %>
                <li class="page-item"><a class="page-link" href="/shop?page=<%= pages %>">
                    <span aria-hidden="true">»</span>
                    <span class="sr-only">Last</span>
                  </a></li>
                <% } %>
              </ul>
              <% } %>


          </nav>






          <!-- end Page -->
          <div class="row my-4">
            <% products.forEach((product) => { %>
            <div class="col-lg-4 col-md-6 mb-4">
              <div class="container">
                <div class="card h-100">
                  <a href="/shop/showDetail/<%=product._id%>">
                    <img class="card-img-top" src="/images/<%= product.photo %>" alt="" loading="lazy"> </a>
                  <div class="card-footer">
                    <h class="card-title">
                      <a href="/shop/showDetail/<%=product._id%>" data-toggle="tooltip" title="อ่านรายละเอียดเพิ่มเติม">
                        <%= product.name %> </a>
                    </h>
                    <h5> ราคา <%= formatNumber(product.price) %> บาท</h5>
                    <form class="form-group text-center" action="/shop/cart/" method="post">
                      <input type="hidden" name="product_id" value="<%=product._id%>">
                      <input type="submit" name="" value="ADD TO CART" class="btn btn-outline-success btn-block">
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <% })  %>
          </div>
          <!-- /.row -->
        </div>
        <!-- /.col-lg-9 -->
      </div>
      <!-- /.row -->
    </div>
    <!-- /.container -->
  </div>
  <!-- Footer -->
  <% include footer %>
  <script>
    $(document).ready(() => {
      $('[data-toggle="tooltip"]').tooltip();
    });
  </script>
</body>

</html>